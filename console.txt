async function askGemini(code, request) {
  const key = "AIzaSyAGf02wJ0POfywTM13L12m-xlDY_TaPvmk"; 
  const model = "gemini-2.0-flash";

  const promptText = `
Đây là đoạn code React Native:
${code}

Hãy sửa theo yêu cầu sau và CHỈ trả về code chuẩn format (không giải thích, không mô tả): ${request}
`.trim();

  try {
    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: promptText }] }],
        generationConfig: {
          temperature: 0,
          maxOutputTokens: 2048,
          candidateCount: 1
        }
      })
    });

    const data = await res.json();
    const reply = data?.candidates?.[0]?.content?.parts?.[0]?.text || "Không có phản hồi.";

    // In ra code giữ nguyên format
    console.log("===== Gemini Code =====\n");
    console.log(reply);
  } catch (err) {
    console.error("Gemini: Lỗi hoặc key sai.\nChi tiết:", err);
  }
}
